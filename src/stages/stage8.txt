# Level 4, Stage 8
# Warrior Knight
# Goal / Interaction: Restore Order to the Fractured Archive
# Objects: orb_fragment_* files, corrupted notes, decoy records, layered shelves, hidden compartments
# Commands / Mechanics: mv, mkdir, ls, cat, ls -a

# Directories
DIR: level_4/
DIR: level_4/fractured_archive/
DIR: level_4/fractured_archive/west_wing/
DIR: level_4/fractured_archive/west_wing/low_shelves/
DIR: level_4/fractured_archive/west_wing/upper_shelves/
DIR: level_4/fractured_archive/east_wing/
DIR: level_4/fractured_archive/east_wing/high_shelves/
DIR: level_4/fractured_archive/east_wing/middle_shelves/
DIR: level_4/fractured_archive/central_hub/
DIR: level_4/storage_bay/
HIDDEN_DIR: level_4/fractured_archive/misaligned_stacks/
HIDDEN_DIR: level_4/fractured_archive/east_wing/.quiet_rack/

# Files
FILE: level_4/fractured_archive/scroll.txt
Warrior Knight,

The Fractured Archive trembles under the weight of its own disarray.
Orb fragments drift and hide, some faint, some dim, some silent.
Among toppled parchment and dusted shelves, decoys and corrupted notes lie in wait.

To restore order, you must listen as well as look.
Use 'cat' to uncover the fragments’ voices,
and let their hum guide you to the place they truly belong.

Beware the guardians among the shelves.
They block careless hands and eyes that wander too quickly.

Only the patient and observant may align the fragments and stabilize the Archive.

— Keeper Arvian
END

FILE: level_4/fractured_archive/west_wing/low_shelves/orb_fragment_w1.frg
A blue shard flickering with faint energy.
(cat reveals a faint hum: ~~~~)
END

FILE: level_4/fractured_archive/west_wing/upper_shelves/orb_fragment_w2.frg
A fragment resting among toppled parchment rolls, vibrating softly.
(cat reveals a weak pulse: ~~~)
END

FILE: level_4/fractured_archive/east_wing/middle_shelves/orb_fragment_e1.frg
A dim fragment, hard to reach.
(cat reveals silence: -)
END

HIDDEN_FILE: level_4/fractured_archive/misaligned_stacks/.orb_fragment_f1.frg
A lost fragment vibrating with irregular pulses.
(cat reveals strong vibrations: ~~~~~~)
END

HIDDEN_FILE: level_4/fractured_archive/east_wing/.quiet_rack/.orb_fragment_e2.frg
A silent fragment hidden behind thick dust.
(cat reveals a faint hum: ~~~~)
END

FILE: level_4/fractured_archive/central_hub/corrupted_note.txt
WARNING: FILE STATE INVALID ###
?? ??? ///
Fragment misdir—ERROR—refer—##STOP##
END

FILE: level_4/storage_bay/misplaced_record_fake.txt
This record pretends to be a fragment… but clearly is not.
END

FILE: level_4/storage_bay/.key.secr
QUIET_RACK_KEY
END

FILE: level_4/fractured_archive/east_wing/hint.txt
Warrior Knight,

Not every glow is safe to touch.
Some hum softly, some pulse urgently,
and some remain silent like shadows that watch.

Listen to their voices—cat each fragment and it will reveal its nature.

- The faintest hum belongs low in the west.
- Strong pulses hide at the center.
- Weak pulses linger in the east’s middle racks.
- Silence waits in quiet corners.

Guardians patrol these halls; move carefully and heed the fragments’ guidance.
Only real fragments will answer the Archive’s call.

— Keeper Arvian
END

FILE: level_4/fractured_archive/central_hub/fake_fragment.tmp
A fake orb fragment meant to confuse the unwary.
END

FILE: level_4/fractured_archive/west_wing/low_shelves/goblin.mob
A nimble Goblin prowls between the low shelves, its eyes glinting in the dim light.
It hisses and shifts, ready to snatch careless hands that disturb the fragments.
END

FILE: level_4/fractured_archive/west_wing/upper_shelves/kobold.mob
A cunning Kobold lurks atop the upper shelves.
It guards misplaced scrolls and hums suspiciously, alert to any movement nearby.
END

FILE: level_4/fractured_archive/east_wing/high_shelves/ogre.mob
A hulking Ogre rumbles atop the high shelves, swatting aside papers and fragments with brute force.
Its heavy breathing shakes the racks and warns of impending danger.
END

FILE: level_4/fractured_archive/central_hub/ogre.mob
A massive Ogre blocks the central hub, its footsteps echoing across the chamber.
Move too quickly, and it will strike — patience is your only ally.
END

FILE: level_4/fractured_archive/misaligned_stacks/ghoul.mob
A ghastly Ghoul haunts the Misaligned Stacks.
Its form flickers like smoke, binding fragmented memories and preventing careless hands from restoring order.
END

# Game Flow
# type "You step into the Fractured Archive. Shelves tremble and fragments hum."
# type "Keeper Arvian appears from the shadows: \"Warrior Knight, the archive quivers. Listen to their hums and beware the guardians.\""
# type "Some fragments are real, some are decoys. Use ls, ls -a, cd, and cat to explore and visualize their pulses."
# type "Move only real fragments and organize them into their correct shelves."
# input
# continue
#
# After all real fragments are restored and mobs defeated:
# type "A stabilizing resonance echoes through the archive."
# type "'Stage 8 complete. The fractured memories align once more.'"
# type "\"Your precision strengthens the archive, Warrior Knight.\""

# Rules
# 1. Only orb_fragment_*.frg files are valid targets.
# 2. Fake or decoy files must be ignored.
# 3. Use ls -a to find fragments in hidden compartments.
# 4. Use cat <file> to observe fragment hum, vibration, or silence.
# 5. mkdir may be required to create missing shelves for proper placement.
# 6. Use mv <file> ./<directory>/ to organize fragments correctly.
# 7. Corrupted notes are misleading and should not be moved.
# 8. Fragments cannot be moved while a mob (.mob file) exists in the same folder.
