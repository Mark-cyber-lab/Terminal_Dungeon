#!/bin/bash
set -e

# Installation directory
INSTALL_DIR="$HOME/.local/share/terminal-dungeon"
JAR_FILE="$INSTALL_DIR/terminaldungeon-1.0.jar"

# Check JAR
if [ ! -f "$JAR_FILE" ]; then
    echo "Terminal Dungeon is not installed correctly."
    echo "Missing: $JAR_FILE"
    exit 1
fi

# Optional dependency check
if command -v apt-get &> /dev/null && ! command -v tree &> /dev/null; then
    echo "Installing dependency: tree"
    sudo apt-get update
    sudo apt-get install -y tree
fi

# Run the game from installation directory so resources load correctly
cd "$INSTALL_DIR"

exec java -jar "$JAR_FILE"
